{% extends 'global/skeleton.html' %}

{% block pagename %}Scelte disponibili{% endblock pagename %}

{% block pagestyle %}

<style>
    @media (min-width: 992px) {
        .collapse.dont-collapse-md {
          display: block;
          height: auto !important;
          visibility: visible;
        }
      }
</style>

{% endblock pagestyle %}

{% block container %}
<div class="container pt-0 pb-5 pt-md-5">

    <!-- Tabs to swith between "vote" and "management" section -->
    <nav class="d-block mb-4">
        <div class="row g-0 border-bottom border-lightgray">
            <div class="col-6 col-lg-2 col-md-4 text-center">
                <a class="nav-link bg-light border-bottom border-3 border-dark rounded-0 w-100 text-dark fw-bold" href="{% url 'apps.votes_results:votable_polls' %}">Esprimi scelte</a>
            </div>
            <div class="col-6 col-lg-2 col-md-4 text-center">
                <a class="nav-link bg-light w-100" href="{% url 'apps.polls_management:all_user_polls' %}">Crea e gestisci</a>
            <div>
        </div>
    </nav>

    <div class="container">
        <!-- Page content -->
        {% block content %}
        <div class="row">
            <div class="col-12 col-lg-8">
                <h1 class="fs-md-3 fs-4 mt-2">Tutte le scelte</h1>
            </div>
            <div class="col-12 col-lg-4">
                <div class="d-flex justify-content-lg-end">
                    <div class="m-1">
                        <a href="{% url 'apps.polls_management:poll_create' %}" 
                            class="btn btn-success" 
                            role="button">Crea scelta</a>
                    </div>
                    <div class="m-1">
                        <!-- Pagination controls (select how many items per page) -->
                        {% include "polls_management/components/pagination/pagination_control.html" with page=page per_page=per_page %}
                        <!-- END: Pagination controls (select how many items per page) -->
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-5">

            <!-- List header -->
            <div class="row fw-light text-primary pt-2 pb-2 d-none d-md-flex text-center mt-5">
                <div class="col-4 text-start">
                    <p class="m-0">Nome e domanda</p>
                </div>
                <div class="col-7 text-center">
                    <div class="row">
                        <div class="col-4">
                            <p class="m-0">Stato</p>
                        </div>
                        <div class="col-4">
                            <p class="m-0">Chiusura</p>
                        </div>
                    </div>
                </div>
                <div class="col-1"></div>
            </div> <!-- END: List header -->

            <!-- Proper list -->
            <div class="list-group mt-2">
                {% for poll in page.object_list %}
                    <!-- poll w id={{poll.id}} -->
                    {% include "votes_results/components/vote_poll_listitem.html" with poll=poll %}
                {% empty %}
                    <p class="fs-3 fw-bold mt-5"> Attualmente non ci sono scelte disponibili! </p>
                {% endfor %}
            </div> <!-- END: Proper list -->

            <!-- Pagination nav -->
            <div class="row justify-content-around">
                <div class="col-auto">
                    {% include "polls_management/components/pagination/pagination_nav.html" with page=page per_page=per_page %}
                </div>
            </div> <!-- END: Pagination nav -->
        </div>
        {% endblock content %}
    </div>
</div>

{% endblock container %}

